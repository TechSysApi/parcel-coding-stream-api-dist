swagger: '2.0'
info:
  title: 'Parcel Coding Stream API'
  description: "API definitions for Coding Data\nThe Kafka topic exposes the FinalCodingData-Event, which is forwarded from the MQTT-Broker to kafka   \nThe MQTT topics define the interface between the coding system (Mail Match System incl. MCS) and SDDM\n"
  contact:
    name: gfellerle
  version: 4.1.0-feature-PZS-6787-vam-mapping-rucksendegrund-18-uberprufen.5
host: 'server:8080'
basePath: 'Kafka, MQTT'
paths:
  logistics.parcel.coding.final.Mailpiece-event:
    get:
      summary: 'Kafka topic for sending coding data'
      description: 'All the related coding data of a specific coding workflow (e.g. OCR Addresscoding, VCS-coding, ...)'
      tags:
        - Kafka
      responses:
        '200':
          description: 'Final coding data for other peripheral systems'
          schema: {type: array, $ref: '#/definitions/FinalCodingEvent'}
  'rc-ic/v1/coding/transmit-final-result/{srcSystem}/{srcInstance}/{dstSystem}/{dstInstance}/{conversationId}':
    post:
      summary: 'MQTT topic for sending coding data'
      description: 'All the related coding data of a specific coding workflow (e.g. OCR Addresscoding, VCS-coding, ...)'
      tags:
        - MQTT
      parameters:
        -
          name: srcSystem
          in: path
          description: '3-letter uppercase name identifying the system issuing the message'
          type: string
          default: IC
        -
          name: srcInstance
          in: path
          description: 'two-digit padded number identifying the system instance issuing the message'
          type: string
          default: '01'
        -
          name: destSystem
          in: path
          description: '3-letter uppercase name identifying the system receiving the message'
          type: string
          default: SDDM
        -
          name: destInstance
          in: path
          description: 'two-digit padded number identifying the system instance receiving the message'
          type: string
          default: '01'
        -
          name: conversationId
          in: path
          description: 'ID to correlate the status with a request'
          type: string
          default: '12345'
      responses:
        default:
          schema: {$ref: '#/definitions/FinalCodingEvent'}
  'rc-ic/v1/coding/submit-action/{srcSystem}/{srcInstance}/{dstSystem}/{dstInstance}/{conversationId}':
    post:
      summary: 'MQTT topic for coding instructions'
      description: 'Used by Sorting Systems to provide coding instructions (e.g. type of coding needed)'
      tags:
        - MQTT
      parameters:
        -
          name: srcSystem
          in: path
          description: '3-letter uppercase name identifying the system issuing the message'
          type: string
          default: IC
        -
          name: srcInstance
          in: path
          description: 'two-digit padded number identifying the system instance issuing the message'
          type: string
          default: '01'
        -
          name: destSystem
          in: path
          description: '3-letter uppercase name identifying the system receiving the message'
          type: string
          default: SDDM
        -
          name: destInstance
          in: path
          description: 'two-digit padded number identifying the system instance receiving the message'
          type: string
          default: '01'
        -
          name: conversationId
          in: path
          description: 'ID to correlate the status with a request'
          type: string
          default: '12345'
      responses:
        default:
          schema: {$ref: '#/definitions/SubmitActionEvent'}
definitions:
  Int:
    type: integer
    description: '<a href="https://swagger.io/docs/specification/data-models/data-types/#numbers">Number @asType integer</a>'
  Address:
    type: object
    properties:
      person:
        $ref: '#/definitions/Person'
        description: 'Information regarding a person'
      additionalAddressLine1:
        type: string
        description: "Personalized and additional address information (e.g.c/o-Adresse)\n(AMPplus: Adresszusatz 1)"
        maxLength: 65
      additionalAddressLine2:
        type: string
        description: "Unpersonalized and not official information (e.g. Chalet Alpenblick)\n(AMPplus: Adresszusatz 2)"
        maxLength: 65
      locality:
        $ref: '#/definitions/Locality'
        description: 'Locality of an address'
      deliveryPointInformation:
        $ref: '#/definitions/DeliveryPoint'
        description: 'Delivery point of an address'
      addressLines:
        type: array
        items:
          type: string
        description: 'Address lines (raw, unvalidated address data submitted by the customer)'
      sourceSystem:
        $ref: '#/definitions/SourceSystem'
        description: "Source of the address\nPossible sources in this context are:\nPREANNOUNCEMENT\nOCR_ADDRESS\nVCS_INTERNAL_ADDRESS\nVCS_EXTERNAL_ADDRESS\nOCR_RETRY_ADDRESS\nMANUAL_CODING_REJECT\nMANUAL_CODING_BULK\nMANUAL_CODING_BULK_AUTOMATIC"
      coderId:
        type: string
        description: 'Identification of the coder which typed the address'
        maxLength: 50
      masterDataKeys:
        $ref: '#/definitions/MasterDataKeys'
        description: 'All validated keys related to the read address elements'
      state:
        $ref: '#/definitions/PersonalizedAddressState'
        description: 'Indicates state of a validated person living at a specific address'
    required:
      - sourceSystem
    additionalProperties: false
    description: 'Address captured by an enrichment device or delivered by a preannouncement system'
  ChargingType:
    type: string
    enum:
      - FREE
      - CHARGEABLE
      - CHARGEABLE_BILL
      - PAID_BY_SENDER
  CodingDepth:
    type: string
    enum:
      - ADAPTIVE
      - COUNTRY
      - POSTCODE
      - DELIVERY_POINT
      - RECEIVER
    description: "ADAPTIVE = Coding as deep as needed (default)\nCOUNTRY = Only Country information is relevant for Sorting\nPOSTCODE = Only Postcode information is relevant for Sorting\nDELIVERY_POINT = Only DeliveryPoint is relevant for Sorting\nRECEIVER = Receiver is needed for Sorting"
  CodingInstruction:
    type: string
    enum:
      - ADDRESS_CODING
      - SERVICE_CODING
    description: "ADDRESS_CODING   The coding system needs to trigger an address coding workflow (including barcode coding)\nSERVICE_CODING   The coding system needs to trigger a service coding workflow"
  DateTime:
    type: string
    description: "<a href=\"https://swagger.io/docs/specification/data-models/data-types/#string\">String @format date-time</a>,\nas defined by <a href=\"https://tools.ietf.org/html/rfc3339#section-5.6\">RFC 3339, section 5.6</a>,\nfor example: <code>2014-05-22T10:42:42.542+00:00</code>."
    format: date-time
  Coding:
    type: object
    properties:
      address:
        $ref: '#/definitions/Address'
        description: 'Contains information regarding the address located on a mailpiece or transfered by a preannouncement system'
      products:
        type: array
        items:
          $ref: '#/definitions/Product'
        description: 'Contains validated products, physically located on a mailpiece or transfered by a preannouncement system'
      informationCarriers:
        type: array
        items:
          $ref: '#/definitions/InformationCarrier'
        description: 'Information which were physically present on the parcel (e.g. barcodes)'
      serviceCoding:
        $ref: '#/definitions/ServiceCoding'
        description: 'Contains service related information which is visible on a parcel'
      sourceSystem:
        $ref: '#/definitions/SourceSystem'
        description: 'The system which publishes the event'
      images:
        type: array
        items:
          $ref: '#/definitions/Image'
        description: 'The images captured during coding'
      workflowInformation:
        $ref: '#/definitions/WorkflowInformation'
        description: 'Detailed insights in the internal workflow steps which occured to deliver the information in this event'
    required:
      - sourceSystem
    additionalProperties: false
    description: 'Information captured by the coding systems during coding'
  DeliveryPointState:
    type: string
    enum:
      - UNKNOWN
      - APPROVED
      - IN_SERVICE
    description: "UNKNOWN\nAPPROVED    Planned and confimed but not valid yed\nIN_SERVICE   In service and valid"
  DeliveryPointType:
    type: string
    enum:
      - NONE
      - DOMICILE
      - PICK_POST
      - MY_POST_24
      - PO_BOX
      - POSTE_RESTANTE
      - COMPANY_POSTCODE
      - INTERNATIONAL_MAILPIECE
      - MILITARY
    description: "NONE = no service\nDOMICILE = Domiziladresse\nPICK_POST = Pickpost\nMY_POST_24 = myPost24\nPO_BOX = Post Office Box (Postfach)\nPOSTE_RESTANTE = Retain at swiss post (Postlagernd)\nCOMPANY_POSTCODE = Company Postcode indicates (FirmenPLZ)\nINTERNATIONAL_PARCEL = International address (Import / Export)\nMILITARY = Military address"
  DeliveryPoint:
    type: object
    properties:
      houseNumber:
        $ref: '#/definitions/Int'
        description: 'House number of an address (e.g. Musterstrasse ->14<-)'
      houseNumberExtension:
        type: string
        description: 'House number extension of an address (e.g. Musterstrasse 14 ->a<-)'
        maxLength: 6
      addressedObjectIdentifier:
        type: string
        description: "Identifier for special address elements (e.g. floor door- or appartementnumber)\n(AMPplus: Stockwerk / TÃ¼r- oder Wohnungsnummer)"
        maxLength: 10
      deliveryPointType:
        $ref: '#/definitions/DeliveryPointType'
        description: 'Type of a delivery point'
      poBoxNumber:
        type: string
        description: "Post Box Number which is located in an address\n(AMPplus: Postfachnummer)"
        maxLength: 10
      customerNumber:
        type: string
        description: 'Customernumber (pickPost- / myPost24 number)'
        maxLength: 8
      state:
        $ref: '#/definitions/DeliveryPointState'
        description: 'Indicates state of a validated delivery point'
    required:
      - deliveryPointType
      - state
    additionalProperties: false
    description: 'Information related to the delivery point of a recipient'
  DetectedElements:
    type: string
    enum:
      - ADDRESS_ROI
      - BARCODE_ROI
    description: "ADDRESS_ROI  This image contains address ROIs\nBARCODE_ROI  This image contains barcode ROIs"
  DetectionError:
    type: string
    enum:
      - MULTIPLE_MAILPIECES_RECOGNIZED
      - NO_MAILPIECE_RECOGNIZED
      - IMAGE_ERROR
      - OTHER
    description: "MULTIPLE_MAILPIECES_RECOGNIZED   More than one mailpiece detected on an image\nNO_MAILPIECE_RECOGNIZED  No mailpiece detected on the image\nIMAGE_ERROR Error in image (e.g. poor quality)\nOTHER    Other cases"
  EnrichmentStep:
    type: object
    properties:
      eventId:
        type: string
        description: 'Internal id of the specific internal enrichment workflow'
      order:
        $ref: '#/definitions/Int'
        description: 'Order of the enrichment'
      type:
        $ref: '#/definitions/SystemTypeCoding'
        description: 'Type of the sytem which processed the enrichment'
      timestampBegin:
        $ref: '#/definitions/DateTime'
        description: 'Start time of the enrichment workflow'
      timestampEnd:
        $ref: '#/definitions/DateTime'
        description: 'End time of the enrichment workflow'
    required:
      - eventId
      - timestampBegin
      - timestampEnd
    additionalProperties: false
  Face:
    type: string
    enum:
      - TOP
      - LEFT
      - RIGHT
      - FRONT
      - REAR
      - BOTTOM
      - FRONT_LEFT
      - FRONT_RIGHT
      - REAR_LEFT
      - REAR_RIGHT
  FinalCodingEvent:
    type: object
    properties:
      codingId:
        type: string
        description: "Unique identifier of a coding message\nPrimary key ð"
        maxLength: 200
      processingItemId:
        type: string
        description: 'Id to identify the mailpiece during a sorting process'
        maxLength: 32
      idTags:
        $ref: '#/definitions/IdentifierTags'
        description: 'Contains a list of ids identifying the processing item.'
      timestamp:
        $ref: '#/definitions/DateTime'
        description: 'Time when the event is published'
      coding:
        $ref: '#/definitions/Coding'
        description: "Data captured during a workflow in the coding system\nThis may contain aggregated data from multiple enrichment steps"
    required:
      - codingId
      - processingItemId
      - timestamp
      - coding
    additionalProperties: false
    description: 'Coding event'
  IdentifierTags:
    type: object
    properties:
      nationalMailpieceIds:
        type: array
        items:
          type: string
        description: "Contains the list of national identifiers to track a mail item within the country.\nThe id is printed on the mailpiece by the sender."
      internationalMailpieceIds:
        type: array
        items:
          type: string
        description: "Contains the list of international identifiers to track a mail item internationally.\nThe id is printed on the mailpiece by the sender."
      nationalLetterIds:
        type: array
        items:
          type: string
        description: "Contains the list of national identifiers to track a letter item within the country.\nThe id can only be created once during a machine sorting cycle and printed on the letter."
      internationalLetterIds:
        type: array
        items:
          type: string
        description: "Contains the list of Universal Postal Union Identifier (UPU-Id) as technical identifiers to track an letter item internationally.\nThe id can only be created once during a machine sorting cycle and printed on the letter.\nRemarks: BDE converts the UPU-Id into a shorter version"
      customerLetterIds:
        type: array
        items:
          type: string
        description: 'Contains the list of national identifiers from the customer to track a letter item within the country.'
      customsNumbers:
        type: array
        items:
          type: string
        description: 'Contains the list of national identifiers from the customs to track an imported mail item within the country.'
      boxIds:
        type: array
        items:
          type: string
        description: 'Contains the list of identifiers to track a Dispobox within the country.'
      sortingProcessId:
        type: string
        description: 'The technical identifier to track an mail item during the complete sorting process. UPU-Id is set as default.'
        maxLength: 200
      sortingProcessStepId:
        type: string
        description: "Contains the Unique Mailpiece-Image Identifier (UMI) as machine independent technical identifier to reference a machine sorting cycle of a mail item. The identifier is used to access the mail images.\nThe id is created during every machine sorting cycle."
        maxLength: 200
    additionalProperties: false
    description: 'Contains a list of logistic or technical identifiers to track a mail item within a specific context.'
  Image:
    type: object
    properties:
      key:
        type: string
        description: 'Key assigned to an image'
        maxLength: 200
      sourceSystem:
        $ref: '#/definitions/SourceSystem'
        description: 'System / device which captured image (or ROI image)'
      mainFace:
        type: boolean
        description: 'Indicates the main image'
      detectedElements:
        type: array
        items:
          $ref: '#/definitions/DetectedElements'
        description: 'Indicates the ROIs found on the image'
      detectionError:
        $ref: '#/definitions/DetectionError'
        description: 'Indicates if there is an error regarding the image'
      face:
        $ref: '#/definitions/Face'
        description: 'Face of the parcel on which the image is located'
    required:
      - key
      - sourceSystem
      - mainFace
      - face
    additionalProperties: false
    description: 'Image information used by coding system'
  InformationCarrier:
    type: object
    properties:
      symbology:
        $ref: '#/definitions/Symbology'
        description: 'Symbology of an information carrier'
      value:
        type: string
        description: 'Value of an information carrier'
      sourceSystem:
        $ref: '#/definitions/SourceSystem'
        description: "Source of an information carrier\nPossible sources in this context are:\nPREANNOUNCEMENT_CODING Coding data delivered by a preannouncement from customer\nAUTOMATIC_CODING\tAutomatic coding system using optical character recognition\nMANUAL_CODING_REJECT\tManual coding station\nMANUAL_CODING_LIGHT\tManual coding by a a portable scanner\nMANUAL_CODING_BULK\tManual bulk coding station"
      timestamp:
        $ref: '#/definitions/DateTime'
        description: 'Timestamp when the information carrier is read from the parcel'
      coderId:
        type: string
        description: 'Identification of the coder which scanned or typed the information carrier'
        maxLength: 50
    required:
      - symbology
      - value
      - sourceSystem
    additionalProperties: false
    description: 'Identified and captured information carrier (e.g. barcodes, logos)'
  KeyWithConfidence:
    type: object
    properties:
      key:
        type: string
        description: 'Value of a key'
      confidence:
        $ref: '#/definitions/Int'
        description: 'Confidence of a key (based on validation with masterdata and coding rules)'
      reasons:
        type: array
        items:
          type: string
        description: 'Reasons which indicate why the confidence has its value'
      appliedCodingRules:
        type: array
        items:
          type: string
        description: 'Coding rules which were applied to resolve a specific key'
    required:
      - key
      - confidence
    additionalProperties: false
    description: 'Key with confidence base on validation'
  LegalForm:
    type: string
    enum:
      - INVIVIDUAL
      - SIMPLE_PARTNERSHIP
      - GENERAL_PARTNERSHIP
      - LIMETED_PARTNERSHIP
      - PARTNERSHIP_LIMETED_BY_SHARES
      - AG_LTD_PUBLIC_LIMETED_COMPANY
      - GMBH_SARL_PRIVATE_LIMETED_COMPANY
      - COOPERATIVE
      - ASSOCIATION
      - FOUNDATION
      - BRANCH_OF_FOREIGN_AG_LTD
      - BRANCH_OF_FOREIGN_SARL
      - FEDERAL_ADMINISTRATION
      - CANTONAL_ADMINISTRATION
      - DISTRICT_ADMINISTRATION
      - MUNICIPAL_ADMINISTRATION
      - PUBLIC_ENTITY_ADMINISTRATION
      - STATE_RECOGNIZED_CHURCH
      - FOREIGN_LEGAL_FORM_BRANCH
      - FOREIGN_COUNTRY_EMBASSY
      - INERNATIONAL_ORGANISZATION
      - FEDERAL_WORKS
      - CANTONAL_WORKS
      - DISTRICT_WORKS
      - MUNICIPAL_WORKS
      - PUBLIC_ENTITY_WORKS
      - POSTAL_ORGANISATIONAL_UNITS
      - SUBSIDIARIES
    description: "Rechtsform, wird nur bei GeschÃ¤ftspersonen abgefÃ¼llt\nINVIVIDUAL = Einzelfirma\nSIMPLE_PARTNERSHIP = Einfache Gesellschaft\nGENERAL_PARTNERSHIP = Kollektivgesellschaft\nLIMETED_PARTNERSHIP = Kommanditgesellschaft\nPARTNERSHIP_LIMETED_BY_SHARES = Kommanditaktiengesellschaft\nAG_LTD_PUBLIC_LIMETED_COMPANY = Aktiengesellschaft/LTD\nGMBH_SARL_PRIVATE_LIMETED_COMPANY = GMBH/SARL\nCOOPERATIVE = Genossenschaft\nASSOCIATION = Verein\nFOUNDATION = Stiftung\nBRANCH_OF_FOREIGN_AG_LTD =\nBRANCH_OF_FOREIGN_SARL = AuslÃ¤ndische GMBH-Filiale;SARL\nFEDERAL_ADMINISTRATION = Verwaltung des Bundes\nCANTONAL_ADMINISTRATION = Verwaltung des Kantons\nDISTRICT_ADMINISTRATION = Verwaltung des Bezirks\nMUNICIPAL_ADMINISTRATION = Verwaltung der Gemeinde\nPUBLIC_ENTITY_ADMINISTRATION = Ã¶ffentliche KÃ¶rperschaft (Verw.)\nSTATE_RECOGNIZED_CHURCH = Staatlich anerkannte Kirche\nFOREIGN_LEGAL_FORM_BRANCH = AuslÃ¤ndische Rechtsform (Filiale)\nFOREIGN_COUNTRY_EMBASSY = AuslÃ¤ndischer Staat (Botschaft)\nINERNATIONAL_ORGANISZATION = Internationale Organisation\nFEDERAL_WORKS = Betriebe des Bundes\nCANTONAL_WORKS = Betriebe des Kantons\nDISTRICT_WORKS = Betriebe des Bezirks\nMUNICIPAL_WORKS = Betriebe der Gemeinde\nPUBLIC_ENTITY_WORKS = Ã¶ffentliche KÃ¶rperschaft (Betriebe)\nPOSTAL_ORGANISATIONAL_UNITS = Organisaitonseinheit der Post\nSUBSIDIARIES = Konzerngesellschaft der Post"
  Locality:
    type: object
    properties:
      streetName:
        type: string
        description: "Name of the streed (e.g. Musterstrasse)\n(AMPplus: Strassenbezeichnung)"
        maxLength: 60
      city:
        type: string
        description: "City\n(AMPplus: Ort)"
        maxLength: 60
      addressPostcode4:
        type: string
        description: "4 digit postcode\n(AMPplus: Postleitzahl)"
        maxLength: 4
      addressPostcodeExtension:
        type: string
        description: "Additional information related to a city\nmultiple purposes, see examples:\n56, 57 = Zoll, Import/Export\n60 = Briefzustellung\n61 = Postfach\n70 = Paketzustellung\n72 = Expresszustellung\n74 = Postautodienst\n75 = Kaserne"
        maxLength: 2
      countryCode:
        type: string
        description: 'ISO-Code of the country (2-digit)'
        maxLength: 2
    additionalProperties: false
    description: 'Information related to the locality of an address'
  MasterDataKeys:
    type: object
    properties:
      houseKey:
        $ref: '#/definitions/KeyWithConfidence'
        description: 'Identifies the address physically located on the mailpiece (e.g. domicile, poBox, pickPost / myPost 24 or other service address)'
      domicileHouseKey:
        $ref: '#/definitions/KeyWithConfidence'
        description: 'Identifies an address where the recipient lives (can be different from the physical address on the parcel, e.g. if the recipient has registered po-boxes or forwardings)'
      personAddressKey:
        $ref: '#/definitions/KeyWithConfidence'
        description: 'Identifies a person at a domiclie address (AMP-Key)'
      streetKey:
        $ref: '#/definitions/KeyWithConfidence'
        description: 'Identifies the street physically located on the mailpiece (street key in AMPplus)'
      postCodeKey:
        $ref: '#/definitions/KeyWithConfidence'
        description: 'Identifies the postcode physically located on the mailpiece (Ordnungsnummer Post (ONRP), FremdschlÃ¼ssel zu ASDP)'
      countryKey:
        $ref: '#/definitions/KeyWithConfidence'
        description: 'Identifies the country physically located on the mailpiece (ID in the country-table in MDS)'
      mailBoxKey:
        $ref: '#/definitions/KeyWithConfidence'
        description: 'Identifies the mailbox physically located on the mailpiece (HBK ID)'
      communityKey:
        $ref: '#/definitions/KeyWithConfidence'
        description: 'Identifies the community physically located on the mailpiece (BFS-Nr Gemeinde, FremdschlÃ¼ssel zu ASDP)'
      militaryKey:
        $ref: '#/definitions/KeyWithConfidence'
        description: 'MLZ physically located on the mailpiece (read by the coding system)'
    additionalProperties: false
    description: 'Resolved address keys'
  PersonState:
    type: string
    enum:
      - UNKNOWN
      - ACTIVE
      - DECEASED_EXPIRED
      - RELOCATED
      - PROVISIONAL
    description: "UNKNOWN\nACTIVE   The person is active and in service\nDECEASED_EXPIRED THE person is dead or the company is extinct\nRELOCATED    The person moved away without giving the new address\nPROVISIONAL  provisional entity"
  PersonType:
    type: string
    enum:
      - PRIVATE
      - BUSINESS
    description: "person type\nPRIVATE = Privatperson\nBUSINESS = GeschÃ¤ftsperson"
  Person:
    type: object
    properties:
      formOfAddress:
        type: string
        description: "Element that uses a word, groups of words, acronyms, or abbreviations to indicate the person's or group's marital status or addressee type (e.g. Herr / Frau).\n(AMPplus: Anrede)"
        maxLength: 80
      title:
        type: string
        description: 'Title of an addressee'
        maxLength: 30
      firstName:
        type: string
        description: "Firstnames of an addressee\n(AMPplus: Vorname)"
        maxLength: 75
      lastName:
        type: string
        description: "Lastname of an addressee\n(AMPplus: Name)"
        maxLength: 80
      suffix:
        type: string
        description: 'Suffix of the name (e.g. Junior, Senior)'
        maxLength: 30
      personType:
        $ref: '#/definitions/PersonType'
        description: 'Indicates if the person is a company or person'
      organizationName:
        type: string
        description: 'Name of an organization (AMPplus: Name der Firma)'
        maxLength: 200
      organizationNameAddOn1:
        type: string
        description: 'Addon of an organization name'
        maxLength: 35
      organizationNameAddOn2:
        type: string
        description: 'Addon2 of an organization name'
        maxLength: 35
      legalForm:
        $ref: '#/definitions/LegalForm'
        description: 'Legal form of the company'
      state:
        $ref: '#/definitions/PersonState'
        description: 'Indicates state of a validated person'
    additionalProperties: false
    description: 'Information related to the person of an address'
  PersonalizedAddressState:
    type: string
    enum:
      - UNKNOWN
      - PLANNED
      - ACTIVE
      - HISTORIC_ACTIVE
      - NIXIE
    description: "UNKNOWN\nPLANNED  Planned but not yet deliverable\nACTIVE   Active and deliverable\nHISTORIC_ACTIVE  historic but active and deliverable\nNIXIE    different reasons (e.g. person or company doesen't exist anymore) - not deliverable"
  ProcessingStateType:
    type: string
    enum:
      - OK
      - NO_FORWARDING
      - INVALID_PAYMENT_TYPE
      - MANUAL_FORWARDING
    description: "OK = 1 = Ok\nNO_FORWARDING = 2 = Keine NS/RS\nINVALID_PAYMENT_TYPE = 3 = UngÃ¼ltige Bezahlart\nMANUAL_FORWARDING = 4 = Manuelle Nachsendung (Kein NSA gefunden, aber auf Transferetikette hat Bote NS-Adresse ausgefÃ¼llt)\n\nStatus 2 wird gesetzt, wenn der Typist eine NS- oder RS-Behandlung abbricht und auf die Paketadresse codiert.\nSomit kÃ¶nnen diese FÃ¤lle zu normalen MCS-FÃ¤lle unterschieden werden.\nD.h. Informationsart NS oder RS und die weiteren Felder werden beibehalten, aber der Status unterscheidet sich."
  Product:
    type: object
    properties:
      code:
        type: string
        description: 'Validated product code (e.g. 509)'
      shortName:
        type: string
        description: 'Shortname of validated product (e.g. PRI)'
      sourceSystem:
        $ref: '#/definitions/SourceSystem'
        description: "Source system which captured the product\nPossible sources:\nPREANNOUNCEMENT Coding data delivered by a preannouncement from customer\nAUTOMATIC_CODING\tAutomatic coding system using optical character recognition\nMANUAL_CODING_REJECT\tManual coding station\nMANUAL_CODING_LIGHT\tManual coding by a a portable scanner\nMANUAL_CODING_BULK\tManual bulk coding station"
    required:
      - code
      - sourceSystem
    additionalProperties: false
    description: 'Identified and validated product (old PRZL, "Zusatzleistung")'
  RejectType:
    type: string
    enum:
      - VCS_REJECT
      - OCR_REJECT
    description: "VCS_REJECT   Rejected by a VCS coder\nOCR_REJECT   Rejected by OCR"
  RetainActionType:
    type: string
    enum:
      - DELIVERY
      - PICKUP
  ReturnReasonType:
    type: string
    enum:
      - UNCLAIMED
      - RELOCATED
      - REFUSED
      - RECIPIENT_UNKNOWN
      - DECEASED
      - COMPANY_DELETED
      - RECIPIENT_RETURNED
      - DAMAGE
      - POSTRESTANTE
      - MILITARY
      - OVERSEA
      - OUTSIDE_CIRCLE
      - BOX_NO_LONGER_EMPTIED
      - RETURN_BY_RECEIVER
      - RETAIN
      - SUMMONS
      - REMARK
      - INVALID_IDENTITY
      - MAILBOX_AND_OR_BELL_NOT_LABELLED
      - CUSTOMS_CLEARANCE
      - GENERAL_CARGO_ILLEGAL_ADDRESS
      - OVERSEA_MISSING_DOCUMENTS
    description: "Reason why parcel is returned\nUNCLAIMED = 0 = Nicht abgeholt\nRELOCATED = 1 = Weggezogen, Nachsendefrist abgelaufen\nREFUSED = 2 = Annahme verweigert\nRECIPIENT_UNKNOWN = 3 = Unbekannt (EmpfÃ¤nger nicht ermittelbar)\nDECEASED = 4 = Gestorben\nCOMPANY_DELETED = 5 = Firma erloschen\nRECIPIENT_RETURNED = 6 = Retour gem. Anweisung Absender/Empf.\nDAMAGE = 7 = BeschÃ¤digung\nPOSTRESTANTE = 8 = Postlagernd\nMILITARY = 9 = im MilitÃ¤r\nOVERSEA = 10 = im Ausland\nOUTSIDE_CIRCLE = 11 = ausserhalb Betreibungskreis\nBOX_NO_LONGER_EMPTIED = 12 = HBK/PF wird nicht mehr geleert\nRETURN_BY_RECEIVER = 13 = RÃ¼cksendung durch EmpfÃ¤nger\nRETAIN = 14 = Auftrag Post zurÃ¼ckbehalten\nSUMMONS = 15 = Vorladung BU\nREMARK = 16 = Vermerk auf Sendung beachten\nINVALID_IDENTITY = 17 = UngÃ¼ltiges/falsches Ausweisdokument\nMAILBOX_AND_OR_BELL_NOT_LABELLED = 18 = Briefkasten oder Klingel nicht angeschrieben\nCUSTOMS_CLEARANCE = 19 = Neu- oder Korrekturverzollung\nGENERAL_CARGO_ILLEGAL_ADDRESS //General cargo (StÃ¼ckgut) cannot be delivered to the designated address (i.e. a PO box)\nOVERSEA_MISSING_DOCUMENTS = 21 = Exportpaket ohne gÃ¼ltige Frachtpapiere"
  ServiceAddress:
    type: object
    properties:
      personAddressKey:
        type: string
        description: 'Identifies a person at a domiclie address (unique)'
      addressLines:
        type: array
        items:
          type: string
        description: 'addressLines for a specific service'
    required:
      - personAddressKey
      - addressLines
    additionalProperties: false
    description: 'The service coding indicates a service which is physically visible on a parcel. These services can be provided during automatic or manual processes (e.g. transfer label)'
  ServiceCoding:
    type: object
    properties:
      serviceId:
        type: string
        description: 'Id of a service order'
      serviceOrder:
        $ref: '#/definitions/ServiceOrder'
        description: 'Indicates the type of the service order'
      returnReason:
        $ref: '#/definitions/ReturnReasonType'
        description: 'Indicates the reason of a returned mailpiece'
      processingState:
        $ref: '#/definitions/ProcessingStateType'
        description: 'Indicates the processing state of a mailpiece (e.g. why the mailpiece has not been processed)'
      applied:
        type: boolean
        description: 'Indicates if a provided service has been applied for a specific mailpiece'
      sourceSystem:
        $ref: '#/definitions/SourceSystem'
        description: 'The system which delivers the service information (physically located on the mailpiece or applied by coder)'
    additionalProperties: false
    description: 'The service coding indicates a service which is physically visible on a parcel. These services can be provided during automatic or manual processes (e.g. transfer label)'
  ServiceInformation:
    type: object
    properties:
      serviceType:
        $ref: '#/definitions/ServiceType'
        description: 'Type of the service'
      serviceAddress:
        $ref: '#/definitions/ServiceAddress'
        description: 'Service address (forwarding or return address)'
      taxAmount:
        type: number
        description: 'tax amount in CHF'
      chargingType:
        $ref: '#/definitions/ChargingType'
        description: 'Charging type of the service'
      serviceCodes:
        type: array
        items:
          type: string
        description: 'Service codes (Products) that needs to be printed on the label'
      returnReason:
        $ref: '#/definitions/ReturnReasonType'
        description: 'Reason why parcel is returned'
      retainActionDate:
        $ref: '#/definitions/DateTime'
        description: 'Date that needs to be printed on the label in the retain case'
      retainActionType:
        $ref: '#/definitions/RetainActionType'
        description: 'Action type that needs to be printed on the label in the retain case'
    required:
      - serviceType
    additionalProperties: false
    description: 'The service information delivered after the service lookup by sorting systems.'
  ServiceOrder:
    type: string
    enum:
      - FORWARDING
      - RETURN_SHIPMENT
      - MISCARRIAGE
      - AFTER_TREATMENT
    description: "FORWARDING = 1 = NachsendungNSP Wenn in einer spÃ¤teren Phase zu einer RS-Adresse die NS-AbklÃ¤rung durchgefÃ¼hrt wird und daraus eine NS wÃ¼rde, wird hier NS angegeben\nRETURN_SHIPMENT = 2 = RuecksendungNSP Wenn aus der NS eine RS wurde, wird hier RS angegeben. Bsp. PPR (PostPac Promo): PPR werden nie nachgesendet. Infos zu DL sind fÃ¼r Nachforschungszwecke trotzdem ausgefÃ¼llt\nMISCARRIAGE = 3 = FehlleitungNSP\nAFTER_TREATMENT = 4 = Zur Nachbehandlung Informationen zur RS/NS (falls vorhanden) werden ausgefÃ¼llt. Der Verarbeitungsstatus wird auf OK gesetzt"
  ServiceType:
    type: string
    enum:
      - FORWARDING
      - RETURN
      - RETAIN
      - DELIVERY_DAY
      - DELIVERY_TIME
  SourceSystemSorting:
    type: object
    properties:
      systemName:
        type: string
        description: 'Device which provided the information'
      instance:
        type: string
        description: 'Instance of the device'
      locationKey:
        type: string
        description: 'Unique identifier of the sorting center (ONRP).'
        maxLength: 200
      type:
        $ref: '#/definitions/SystemTypeSorting'
        description: 'Indicates the type of the system'
    required:
      - systemName
      - instance
      - type
    additionalProperties: false
  SourceSystem:
    type: object
    properties:
      systemName:
        type: string
        description: 'Device which provided the information'
      instance:
        type: string
        description: 'Instance of the device'
      locationKey:
        type: string
        description: 'Unique identifier of the sorting center (ONRP).'
        maxLength: 200
      type:
        $ref: '#/definitions/SystemTypeCoding'
        description: 'Indicates the type of the system'
    required:
      - systemName
      - instance
      - locationKey
      - type
    additionalProperties: false
  SubmitActionEvent:
    type: object
    properties:
      processingItemId:
        type: string
        description: 'machine specific id to identify the mailpiece during a sorting process'
        maxLength: 32
      idTags:
        $ref: '#/definitions/IdentifierTags'
        description: 'Optional list of Ids that identifies a mailpiece in a specific context'
      timestamp:
        $ref: '#/definitions/DateTime'
        description: 'Time when the event occured'
      instruction:
        $ref: '#/definitions/CodingInstruction'
        description: 'The type of coding requested by SDDM'
      codingDepth:
        $ref: '#/definitions/CodingDepth'
      sourceSystem:
        $ref: '#/definitions/SourceSystemSorting'
        description: 'Sorting system which requested a coding'
      serviceInformation:
        $ref: '#/definitions/ServiceInformation'
        description: 'Related service information (case SERVICE_CODING)'
    required:
      - processingItemId
      - timestamp
      - instruction
      - codingDepth
      - sourceSystem
    additionalProperties: false
  Symbology:
    type: string
    enum:
      - NOT_RECOGNIZED
      - ADDON
      - CODABAR
      - CODE_39
      - CODE_93
      - CODE_128
      - DATA_MATRIX
      - EAN_8
      - EAN_13
      - EAN_128
      - I2OF5
      - MAXI_CODE
      - PDF_417
      - QR
      - UPC_A
      - UPC_E
    description: "NOT_RECOGNIZED The symbology is not recognized\nADDON Barcode Zusatz zu EAN und UPC\nCODABAR Barcode Codabar\nCODE_39 Barcode 39\nCODE_93 Barcode 93\nCODE_128 Barcode 128\nDATA_MATRIX Data Matrix Code\nEAN_8 International Article Number\nEAN_13 International Article Number\nEAN_128 International Article Number\nI2OF5 Interleved 2 of 5 Code\nMAXI_CODE Barcode Maxicode\nPDF_417 Barcode PDF417\nQR QR Barcode\nUPC_A Barcode Universal Product Codes (Normalversion)\nUPC_E Barcode Universal Product Codes (Kurzvariante)"
  SystemTypeCoding:
    type: string
    enum:
      - IMAGE_PREPROCESSOR
      - IMAGE_CONTROLLER
      - PREANNOUNCEMENT
      - OCR_ROI_DETECTION
      - OCR_BARCODE
      - OCR_ADDRESS
      - VCS_INTERNAL_ROI
      - VCS_INTERNAL_PLZ
      - VCS_INTERNAL_ADDRESS
      - VCS_EXTERNAL_ROI
      - VCS_EXTERNAL_PLZ
      - VCS_EXTERNAL_ADDRESS
      - OCR_RETRY_BARCODE
      - OCR_RETRY_ADDRESS
      - MANUAL_CODING_REJECT
      - MANUAL_CODING_LIGHT
      - MANUAL_CODING_BULK
      - MANUAL_CODING_BULK_AUTOMATIC
      - MANUAL_CODING_FLAT_BUNDLE
      - ADDRESS_VALIDATION_AUTOMATIC
      - ADDRESS_VALIDATION_HUMAN_SUPPORT
    description: "IMAGE_PREPROCESSOR Device which handles image formatting and converting\nIMAGE_CONTROLLER Device which is responsible for the internal enrichment workflow of the coding systems (PieceManager)\nPREANNOUNCEMENT  Device which validates and publishes preannouncement data (Preannouncement processor)\nOCR_ROI_DETECTION    Device which detects ROI elements on an image (e.g. recipient address, barcode, ...)\nOCR_BARCODE  Device which reads / captures barcodes on an image\nOCR_ADDRESS  Device which reads address elements on an image\nVCS_INTERNAL_ROI Device VCS Offshore: Task in the video coding system where the coder detects address ROI elements on an image\nVCS_INTERNAL_PLZ Device VCS Offshore: Task in the video coding system where the coder enters the postcode based on an address ROI image\nVCS_INTERNAL_ADDRESS Device VCS Offshore: Task in the video coding system where the coder enters the recipient address based on an address ROI image\nVCS_EXTERNAL_ROI Device VCS Offshore: Task in the video coding system where the coder detects address ROI elements on an image\nVCS_EXTERNAL_PLZ Device VCS Offshore: Task in the video coding system where the coder enters the postcode based on an address ROI image\nVCS_EXTERNAL_ADDRESS Device VCS Offshore: Task in the video coding system where the coder enters the recipient address based on an address ROI image\nOCR_RETRY_BARCODE    Device which reads / captures barcodes on an image in a following workflow (e.g. after VCS ROI or VCS PLZ)\nOCR_RETRY_ADDRESS    Device which reads address elements on an image in a following workflow (e.g. after VCS ROI or VCS PLZ)\nMANUAL_CODING_REJECT Device where a coder manually captures barcodes and enters address information\nMANUAL_CODING_LIGHT Device where barcodes barcodes, products and the weight is captured (manual or partially automated)\nMANUAL_CODING_BULK   Device where barcodes, weight and dimensions and address information for bulky goods are captured or entered (manual or partially automated)\nMANUAL_CODING_BULK_AUTOMATIC Device where a coder manually captures barcodes and other specific information for bulky goods\nMANUAL_CODING_FLAT_BUNDLE Device where a coder manually captures postcodes for flat bundles\nADDRESS_VALIDATION_AUTOMATIC Device which validates an address in an automated enrichment workflow step (e.g. ocr address)\nADDRESS_VALIDATION_HUMAN_SUPPORT Device which validates an address in an enrichment workflow where a human is involved - as a support of the coder (e.g. MCS or VCS)"
  SystemTypeSorting:
    type: string
    enum:
      - UNKNOWN
      - SENDING_DATA_DECISION_MANAGEMENT
  WorkflowInformation:
    type: object
    properties:
      enrichmentSteps:
        type: array
        items:
          $ref: '#/definitions/EnrichmentStep'
        description: 'The enrichment which occured during a coding workflow'
      nextEnrichmentStep:
        $ref: '#/definitions/EnrichmentStep'
        description: 'Indicates the next possible internal enrichment workflow step'
      maxCodingLevelAchieved:
        type: boolean
        description: 'Indicates if the maximal possible coding quality is achieved'
      rejectType:
        $ref: '#/definitions/RejectType'
        description: "Describes the type of the rejection\nIn some cases an enrichment workflow can be rejected"
      rejectReason:
        type: string
        description: "Reason of rejection\ne.g.\nif there is no address ROI in VCS\nif there is military address on a mailpiece in VCS\nif all the images are empty in OCR or image preprocessing"
    required:
      - enrichmentSteps
      - maxCodingLevelAchieved
    additionalProperties: false
